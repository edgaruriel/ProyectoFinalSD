<%= @ip %>
Time of season: <%= @ip_object.time %>
<% @seats.each_with_index do |seat, index| %>
    <%= '</div>'.html_safe if (index % 10) == 0 && index != 0 %>
    <%= '<div class="row">'.html_safe if (index % 10) == 0 %>
    <div class="col-xs-1 col-md-1 col-lg-1 col-xl-1">
      <%= form_for seat, :method => :patch, :remote => true do |f| %>
        <% if seat.is_available? %>
          <!-- No esta ocupado el lugar y se intentaria prereservar -->
          <%= f.hidden_field :prereserved, :value => '1' %>
        <% elsif seat.prereserved && seat.is_prereserved_by(@ip) %>
          <!-- Es el dueÃ±o de la reservacion, se desprereservaria -->
          <%= f.hidden_field :prereserved, :value => '0' %>
        <% elsif seat.prereserved && !seat.reserved %>
          <%= f.hidden_field :prereserved, :value => '2' %>
          <!-- no mandamos parameto de prereservacion porque ya esta ocupado -->
        <% else %>
          <%= f.hidden_field :prereserved, value: seat.prereserved %>
        <% end %>
        <%= f.submit "#{seat.row} #{seat.number}", class:"btn btn-#{seat.color(@ip)}" %>
      <% end %>
    </div>
<% end %>
</div>
<% content_for :javascripts do %>
  window.setTimeout(function(){ document.location.reload(true); }, 3000);
<% end %>

<%= form_for Reservation.new, :method => :post do |f| %>
  <%= f.submit "Terminar Reservacion", class: 'btn btn-default' %>
<% end %>
